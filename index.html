<!doctype html>
<html lang="zh-CN" data-theme="dark">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>MACYang Â· ä½œå“é›†</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Space+Grotesk:wght@400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

<style>
/* -------------------------------------------------
   ğŸŒğŸŒ™ ä¸»é¢˜å˜é‡ç³»ç»Ÿï¼ˆLight / Darkï¼‰
-------------------------------------------------- */

:root {
  --transition: 0.35s ease;
}

/* å¤œé—´ä¸»é¢˜ï¼ˆé»˜è®¤ï¼‰ */
html[data-theme="dark"]{
  --bg:#0d0f12;
  --card:#ffffff;
  --muted:#98a0a8;

  --accent1:#ff3cac;
  --accent2:#00f5a0;
  --accent3:#3acaff;

  --glass: rgba(255,255,255,0.08);
  --glass-strong: rgba(255,255,255,0.16);
  --glass-border: rgba(255,255,255,0.08);

  --shadow: 0 10px 30px rgba(0,0,0,0.35);
}

/* æ—¥é—´ä¸»é¢˜ï¼ˆVisible differenceï¼‰ */
html[data-theme="light"]{
  --bg:#f4f5f7;
  --card:#1a1a1a;
  --muted:#666;

  --accent1:#ff4d8a;
  --accent2:#22d28f;
  --accent3:#4ba8ff;

  --glass: rgba(0,0,0,0.05);
  --glass-strong: rgba(0,0,0,0.1);
  --glass-border: rgba(0,0,0,0.12);

  --shadow: 0 8px 20px rgba(0,0,0,0.15);
}

/* -------------------------------------------------
   BODY èƒŒæ™¯ï¼ˆä½¿ç”¨ä¸»é¢˜å˜é‡ï¼Œé¿å…å›ºå®šæ·±è‰²å¯¼è‡´æ— å˜åŒ–ï¼‰
-------------------------------------------------- */
body{
  margin:0;
  font-family:'Inter',sans-serif;
  -webkit-font-smoothing:antialiased;
  line-height:1.45;

  background:
    radial-gradient(900px 600px at 10% 10%, rgba(58,202,255,0.08), transparent 35%),
    radial-gradient(600px 500px at 90% 90%, rgba(255,60,172,0.08), transparent 35%),
    linear-gradient(180deg, var(--bg) 0%, color-mix(in srgb, var(--bg) 90%, black) 100%);

  color:var(--card);
  transition:background var(--transition), color var(--transition);
  padding-bottom:80px;
}

/* æ—¥é—´ä¸»é¢˜æ›¿æ¢èƒŒæ™¯ */
html[data-theme="light"] body{
  background:
    radial-gradient(800px 450px at 20% 20%, rgba(0,0,0,0.06), transparent 40%),
    linear-gradient(180deg, var(--bg) 0%, white 100%);
}

/* -------------------------------------------------
   å…¨å±€åŸºç¡€
-------------------------------------------------- */
*{box-sizing:border-box}
html,body{height:100%}

#bg-canvas{
  position:fixed; inset:0;
  pointer-events:none;
  mix-blend-mode:screen;
  opacity:0.85;
  z-index:0;
}

.wrap{
  position:relative;
  max-width:1200px;
  margin:40px auto;
  padding:28px;
  z-index:2;
}

/* -------------------------------------------------
   Header
-------------------------------------------------- */
header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:26px;
}

.brand{display:flex;gap:16px;align-items:center;}

.logo{
  width:68px;height:68px;border-radius:14px;
  display:grid;place-items:center;
  background:linear-gradient(135deg,var(--accent1),var(--accent3));
  transform:rotate(-8deg);
  transition:.45s cubic-bezier(.2,.9,.3,1);
  box-shadow:var(--shadow);
}
.logo:hover{transform:rotate(0deg) scale(1.05);}

.brand h1{margin:0;font-family:'Space Grotesk';color:var(--card);font-size:20px;font-weight:600;}
.brand p{margin:0;font-size:12px;color:var(--muted);}

nav{display:flex;gap:12px;}

.chip{
  padding:8px 14px;
  border-radius:999px;
  cursor:pointer;
  font-weight:600;
  background:linear-gradient(90deg,rgba(255,255,255,0.04),transparent);
  border:1px solid var(--glass-border);
  color:var(--card);
  transition:transform .22s;
  backdrop-filter:blur(6px);
}
.chip:hover{transform:translateY(-3px);box-shadow:var(--shadow);}

/* -------------------------------------------------
   Hero
-------------------------------------------------- */
.hero{
  display:grid;
  grid-template-columns:1fr 420px;
  gap:28px;
}

.intro{
  padding:28px;border-radius:18px;
  background:var(--glass);
  border:1px solid var(--glass-border);
  box-shadow:var(--shadow);
}

.intro h2{margin:0 0 8px;font-size:28px;color:var(--card);}
.lead{color:var(--muted);margin:0 0 18px;}

.skills{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:16px;}
.badge{
  padding:8px 10px;border-radius:12px;
  font-size:13px;color:var(--card);
  background:var(--glass);
  border:1px solid var(--glass-border);
}

.btn{
  padding:10px 16px;border:none;
  border-radius:12px;
  background:linear-gradient(90deg,var(--accent2),var(--accent3));
  color:#061014;font-weight:700;
  cursor:pointer;
  box-shadow:var(--shadow);
}

.ghost{
  padding:10px 14px;
  border-radius:12px;
  background:transparent;
  border:1px solid var(--glass-border);
  color:var(--card);
}

/* Profile */
.profile{
  background:var(--glass);
  border:1px solid var(--glass-border);
  padding:28px;
  border-radius:18px;
  box-shadow:var(--shadow);
  text-align:center;
}

.avatar{
  width:90px;height:90px;border-radius:18px;
  display:grid;place-items:center;
  margin:0 auto 12px;
  font-size:32px;font-weight:700;
  background:linear-gradient(135deg,var(--accent1),var(--accent3));
  color:#fff;
}

.socials a{
  color:var(--card);font-size:20px;
  margin:0 8px;
  transition:0.25s;
}
.socials a:hover{color:var(--accent2);}

/* -------------------------------------------------
   ä½œå“ / Gallery
-------------------------------------------------- */
#works h3,#blog h3,#contact h3{
  font-size:22px;
  margin:60px 0 20px;
  color:var(--card);
}

.controls{display:flex;gap:12px;margin-bottom:18px;}
.filter.active{
  background:var(--accent2);
  color:#061014;
  border-color:transparent;
}

.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:22px;}

.card{
  background:var(--glass);
  border:1px solid var(--glass-border);
  border-radius:18px;
  box-shadow:var(--shadow);
  overflow:hidden;
}

.card-link{display:block;color:inherit;text-decoration:none;}

.cover{
  width:100%;
  height:180px;
  background-size:cover;
  background-position:center;
}

.meta{padding:16px;}
.title{margin:0 0 8px;}
.desc{color:var(--muted);margin:0 0 12px;font-size:14px;}
.tags .tag{background:var(--glass);padding:4px 8px;border-radius:8px;margin-right:6px;font-size:12px;}

/* -------------------------------------------------
   Blog
-------------------------------------------------- */
.blog-list{display:grid;gap:16px;}
.post{
  display:flex;gap:12px;
  padding:16px;
  border-radius:14px;
  background:var(--glass);
  border:1px solid var(--glass-border);
}
.thumb{
  width:110px;height:80px;border-radius:10px;
  background-size:cover;background-position:center;
}

/* -------------------------------------------------
   Contact
-------------------------------------------------- */
#contact div{color:var(--card);}

/* -------------------------------------------------
   Floating buttons
-------------------------------------------------- */
.floating-contact{
  position:fixed;bottom:30px;right:26px;
  display:flex;flex-direction:column;gap:12px;
  z-index:20;
}
.floating-contact a{
  width:46px;height:46px;border-radius:12px;
  display:grid;place-items:center;
  background:var(--glass);
  border:1px solid var(--glass-border);
  color:var(--card);
  font-size:20px;
  transition:0.25s;
}
.floating-contact a:hover{transform:translateY(-3px);box-shadow:var(--shadow);}

/* -------------------------------------------------
   Modal
-------------------------------------------------- */
.modal{
  position:fixed;inset:0;
  background:rgba(0,0,0,0.55);
  backdrop-filter:blur(6px);
  opacity:0;pointer-events:none;
  transition:0.3s;
  display:flex;justify-content:center;align-items:center;
  padding:20px;
}
.modal.open{opacity:1;pointer-events:auto;}

.panel{
  width:95%;max-width:880px;
  background:var(--glass);
  border:1px solid var(--glass-border);
  border-radius:16px;
  padding:24px;
  box-shadow:var(--shadow);
}

.row{display:flex;gap:20px;flex-wrap:wrap;}

.tag{
  background:var(--glass);
  padding:6px 10px;
  border-radius:10px;
  font-size:12px;
}
.socials {
  margin-bottom: 16px;
}
.filter {
  padding: 8px 16px;
  border-radius: 10px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;

  /* ä½¿ç”¨ä¸»é¢˜å˜é‡é€‚é…ä¸¤ç§èƒŒæ™¯ */
  background: color-mix(in srgb, var(--bg) 92%, var(--card) 8%);
  border: 1px solid color-mix(in srgb, var(--bg) 70%, var(--card) 30%);
  color: var(--card);

  transition:
    background var(--transition),
    color var(--transition),
    box-shadow var(--transition),
    transform var(--transition);
}

.filter:hover {
  /* hover çŠ¶æ€æ›´è½»ï¼Œæ›´æŸ”å’Œ */
  box-shadow: 0 4px 14px rgba(0,0,0,0.12);
  transform: translateY(-2px);
}

/* é€‰ä¸­çŠ¶æ€ï¼ˆé«˜äº®ï¼‰ */
.filter.active {
  background: linear-gradient(90deg, var(--accent2), var(--accent3));
  border-color: transparent;
  color: #061014;
  box-shadow: 0 6px 18px rgba(0,0,0,0.18);
  transform: translateY(-2px);
}
.logo {
  width: 68px;
  height: 68px;
  border-radius: 14px;
  display: flex;
  align-items: center;
  justify-content: center;

  font-family: 'Space Grotesk', sans-serif;
  font-size: 26px;         /* æ§åˆ¶ LY å¤§å° */
  font-weight: 700;        /* ç²—ä¸€ç‚¹æ›´æœ‰æ ‡å¿—æ„Ÿ */
  letter-spacing: 1px;     /* è®© L å’Œ Y æ›´å‡è¡¡ */
  color: #ffffff;

  background: linear-gradient(135deg, var(--accent1), var(--accent3));
  transform: rotate(-8deg);
  transition: .45s cubic-bezier(.2,.9,.3,1);
  box-shadow: var(--shadow);
}

.logo:hover {
  transform: rotate(0deg) scale(1.05);
}

</style>

</head>
<body>

<canvas id="bg-canvas"></canvas>

<div class="wrap">
<header>
  <div class="brand">
    <div class="logo">LY</div>
    <div>
      <h1>MACÂ·YLog</h1>
      <p>AI Â· æŠ€æœ¯ Â· å¤§æ•°æ® Â· æ‘„å½± Â· äº¤äº’</p>
    </div>
  </div>

  <nav>
    <button class="chip" onclick="scrollToSection('works')">ä½œå“</button>
    <button class="chip" onclick="scrollToSection('blog')">åšå®¢</button>
    <button class="chip" onclick="scrollToSection('contact')">è”ç³»</button>

    <!-- ğŸŒğŸŒ™ ä¸»é¢˜åˆ‡æ¢æŒ‰é’® -->
    <button class="chip" id="theme-toggle">ğŸŒ™</button>
  </nav>
</header>

<!-- Continue ... (ç”±äºç¯‡å¹…é™åˆ¶ï¼Œæˆ‘å¯ä»¥åœ¨ä½ å›å¤â€œç»§ç»­â€åè¾“å‡ºå‰©ä½™ HTML + å…¨éƒ¨ JS) -->
<!-- ===========================
     HERO åŒºå—
=========================== -->
<section class="hero">
  <div class="intro">
    <h2>ä½ å¥½ï¼Œæˆ‘æ˜¯
      <span style="background:linear-gradient(90deg,var(--accent1),var(--accent3));
      -webkit-background-clip:text;color:transparent;">
      MacÂ·Yang
      </span>
    </h2>
    <p class="lead">ä¸€ä¸ªå±•ç¤ºæˆ‘æŠ€æœ¯ã€ç”Ÿæ´»ã€æ‘„å½±åŠå®éªŒæ€§åˆ›ä½œçš„ä¸ªäººä½œå“é›†ç½‘ç«™ã€‚</p>

    <div class="skills">
      <span class="badge">Python</span>
      <span class="badge">aiAgent / ai</span>
      <span class="badge">å¤§æ•°æ®</span>
      <span class="badge">æ‘„å½±</span>
      <span class="badge">Interaction</span>
    </div>

    <div style="display:flex;gap:12px;">
      <button class="btn" onclick="scrollToSection('works')">æŸ¥çœ‹ä½œå“</button>
      <button class="ghost" onclick="scrollToSection('blog')">é˜…è¯»åšå®¢</button>
    </div>
  </div>

  <aside class="profile">
    <div class="avatar">LY</div>
    <h3>åˆ˜æ´‹</h3>
    <p>åå¥½ï¼špythonã€aiAgentã€å¤§æ•°æ®ã€äº¤äº’è‰ºæœ¯ã€å®éªŒæ€§</p>

    <div class="socials">
      <a href="https://github.com/" target="_blank"><i class="fab fa-github"></i></a>
      <a href="https://twitter.com/" target="_blank"><i class="fab fa-twitter"></i></a>
      <a href="mailto:macfeng6@gmail.com"><i class="fa-solid fa-envelope"></i></a>
    </div>

    <a href="mailto:macfeng6@gmail.com" class="btn" style="margin-top:12px;">è”ç³»æˆ‘</a>
  </aside>
</section>

<!-- ===========================
     WORKS
=========================== -->
<section id="works">
  <h3>ä½œå“å±•ç¤º</h3>

  <div class="controls">
    <button class="filter active" data-filter="all" onclick="filterGrid(event)">å…¨éƒ¨</button>
    <button class="filter" data-filter="game" onclick="filterGrid(event)">æŠ€æœ¯</button>
    <button class="filter" data-filter="ai" onclick="filterGrid(event)">AI</button>
    <button class="filter" data-filter="photo" onclick="filterGrid(event)">æ‘„å½±</button>
    <button class="filter" data-filter="experimental" onclick="filterGrid(event)">å®éªŒæ€§</button>
  </div>

  <div class="grid" id="gallery">

    <article class="card" data-type="game" data-cover-url="https://images.unsplash.com/photo-1596556156555-520e5c544d9f">
      <a class="card-link" onclick="openModal(datasetToObject(this.closest('.card')))">
        <div class="cover" style="background-image:url('https://ix-marketing.imgix.net/global.jpg');"></div>
        <div class="meta">
          <h4 class="title">Python æ ¸å¿ƒæŠ€æœ¯æ ˆ</h4>
          <p class="desc">æ·±å…¥ç†è§£ Python è¯­è¨€çš„åŸç†ã€æ•°æ®ç»“æ„ã€é«˜æ•ˆç®—æ³•åŠå¼‚æ­¥ç¼–ç¨‹èƒ½åŠ›ã€‚</p>
          <div class="tags">
            <span class="tag">Python</span><span class="tag">ç®—æ³•</span>
          </div>
        </div>
      </a>
    </article>

    <article class="card" data-type="ai" data-cover-url="https://images.unsplash.com/photo-1517457210287-29177114d101">
      <a class="card-link" onclick="openModal(datasetToObject(this.closest('.card')))">
        <div class="cover" style="background-image:url('https://ix-marketing.imgix.net/key-features_design.png');"></div>
        <div class="meta">
          <h4 class="title">AI å¤§æ¨¡å‹åº”ç”¨ä¸ Prompt å·¥ç¨‹</h4>
          <p class="desc">ä¸“æ³¨äº LLM çš„è°ƒç”¨ä¼˜åŒ–ã€é«˜æ•ˆ Prompt è®¾è®¡ä»¥åŠ Agent æ¡†æ¶çš„æ„å»ºä¸å®è·µã€‚</p>
          <div class="tags"><span class="tag">LLM</span><span class="tag">Prompt</span></div>
        </div>
      </a>
    </article>

    <article class="card" data-type="photo" data-cover-url="https://images.unsplash.com/photo-1494790108377-be9c29b29330">
      <a class="card-link" onclick="openModal(datasetToObject(this.closest('.card')))">
        <div class="cover" style="background-image:url('https://images.unsplash.com/photo-1494790108377-be9c29b29330');"></div>
        <div class="meta">
          <h4 class="title">è¡—å¤´è‚–åƒæ‘„å½±</h4>
          <p class="desc">èšç„¦äººç‰©ä¸åŸå¸‚èƒŒæ™¯å…³ç³»ï¼Œæ•æ‰ç¬é—´æƒ…æ„Ÿã€‚</p>
          <div class="tags"><span class="tag">è‚–åƒ</span><span class="tag">è¡—å¤´</span></div>
        </div>
      </a>
    </article>

    <article class="card" data-type="experimental" data-cover-url="https://images.unsplash.com/photo-1549490349-8643362a9b3d">
      <a class="card-link" onclick="openModal(datasetToObject(this.closest('.card')))">
        <div class="cover" style="background-image:url('https://ix-marketing.imgix.net/2024-06_the-power-of-images-in-creative-work_header.jpg');"></div>
        <div class="meta">
          <h4 class="title">æƒ…æ„ŸåŒ–äº¤äº’åŸå‹è®¾è®¡</h4>
          <p class="desc">åŸºäºå¿ƒç†å­¦çš„å¾®äº¤äº’è®¾è®¡ï¼Œæé«˜æ„‰æ‚¦æ„Ÿã€‚</p>
          <div class="tags"><span class="tag">UX</span><span class="tag">å¾®åŠ¨æ•ˆ</span></div>
        </div>
      </a>
    </article>

  </div>
</section>

<!-- ===========================
     BLOG
=========================== -->
<section id="blog">
  <h3>åšå®¢æ–‡ç« </h3>

  <div class="blog-list">
    <article class="post">
      <div class="thumb" style="background-image:url('https://images.unsplash.com/photo-1555066931-4365d14bab8c');"></div>
      <div class="info">
        <h4>Agent æ¡†æ¶çš„æ„å»ºä¸å®è·µ</h4>
        <p>æ¢è®¨å¦‚ä½•è®¾è®¡ä¸ä¼˜åŒ–è‡ªä¸» AI Agentã€‚<span class="tag">AI Agent</span></p>
      </div>
    </article>

    <article class="post">
      <div class="thumb" style="background-image:url('https://images.unsplash.com/photo-1498050108023-c5249f4df085');"></div>
      <div class="info">
        <h4>å¾®äº¤äº’è®¾è®¡ï¼šæ‰“é€ æ›´å¼ºåé¦ˆ</h4>
        <p>åˆ†æåŠ¨æ•ˆå¦‚ä½•å¢å¼ºç”¨æˆ·ä½“éªŒã€‚<span class="tag">äº¤äº’è®¾è®¡</span></p>
      </div>
    </article>

    <article class="post">
      <div class="thumb" style="background-image:url('https://ix-marketing.imgix.net/q3-24_blog_image-enhancement.png?auto=format,compress&w=3038');"></div>
      <div class="info">
        <h4>å…‰å½±ä¸æ„å›¾ï¼šæ‘„å½±åˆ°æ•°å­—è¡¨è¾¾</h4>
        <p>è®¨è®ºä¼ ç»Ÿæ‘„å½±è¯­è¨€ä¸ç•Œé¢è®¾è®¡çš„è”ç³»ã€‚<span class="tag">æ‘„å½±</span></p>
      </div>
    </article>
  </div>
</section>

<!-- ===========================
     CONTACT
=========================== -->
<section id="contact">
  <h3>è”ç³»æ–¹å¼</h3>

  <div style="display:flex;gap:14px;flex-wrap:wrap;">
    <div style="min-width:260px;padding:16px;border-radius:12px;border:1px solid var(--glass-border);background:var(--glass);">
      <strong>GitHub</strong>
      <p>github.com/meking1024</p>
    </div>

    <div style="min-width:260px;padding:16px;border-radius:12px;border:1px solid var(--glass-border);background:var(--glass);">
      <strong>Phone</strong>
      <p>176****6614</p>
    </div>

    <div style="min-width:260px;padding:16px;border-radius:12px;border:1px solid var(--glass-border);background:var(--glass);">
      <strong>Email</strong>
      <p>macfeng6@gmail.com</p>
    </div>
  </div>
</section>

<footer style="text-align:center;color:var(--muted);margin-top:40px;">
  Â© <span id="yr"></span> åˆ˜æ´‹ â€” ä»¥ç§‘æŠ€æ‰“ç£¨ä½“éªŒ
</footer>

<!-- Floating Buttons -->
<div class="floating-contact">
  <a href="mailto:macfeng6@gmail.com"><i class="fa-solid fa-envelope"></i></a>
  <a href="https://github.com/" target="_blank"><i class="fab fa-github"></i></a>
  <a href="https://twitter.com/" target="_blank"><i class="fab fa-twitter"></i></a>
</div>

<!-- MODAL -->
<div id="modal" class="modal" aria-hidden="true">
  <div class="panel">
    <div style="display:flex;justify-content:space-between;">
      <h3>ä½œå“è¯¦æƒ…</h3>
      <button class="chip" onclick="closeModal()">å…³é—­</button>
    </div>
    <div id="modal-content" class="row"></div>
  </div>
</div>
<script>
/* ========= æ¸²æŸ“å½“å‰å¹´ä»½ ========= */
document.getElementById('yr') && (document.getElementById('yr').textContent = new Date().getFullYear());

/* ========= ä¸»é¢˜åˆ‡æ¢ï¼ˆç³»ç»Ÿåå¥½ + localStorage + å¯è§èƒŒæ™¯åˆ‡æ¢ï¼‰ ========= */
(function(){
  const root = document.documentElement;
  const btn = document.getElementById('theme-toggle');

  function applyTheme(theme){
    root.setAttribute('data-theme', theme);
    updateIcon(theme);
  }
  function updateIcon(theme){
    if(!btn) return;
    if(theme === 'light'){
      btn.textContent = 'â˜€ï¸';
      btn.setAttribute('aria-pressed','true');
      btn.title = 'å½“å‰ï¼šæ—¥é—´ï¼ˆç‚¹å‡»åˆ‡æ¢åˆ°å¤œé—´ï¼‰';
    } else {
      btn.textContent = 'ğŸŒ™';
      btn.setAttribute('aria-pressed','false');
      btn.title = 'å½“å‰ï¼šå¤œé—´ï¼ˆç‚¹å‡»åˆ‡æ¢åˆ°æ—¥é—´ï¼‰';
    }
  }

  // åˆå§‹åŒ–ï¼šä¼˜å…ˆ localStorage -> ç³»ç»Ÿåå¥½ -> dark
  try {
    const saved = localStorage.getItem('theme');
    if(saved === 'light' || saved === 'dark'){
      applyTheme(saved);
    } else {
      const prefersLight = window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches;
      applyTheme(prefersLight ? 'light' : 'dark');
    }
  } catch (e) {
    // localStorage å¤±æ•ˆæ—¶ä½¿ç”¨é»˜è®¤
    applyTheme('dark');
  }

  // ç‚¹å‡»åˆ‡æ¢
  if(btn){
    btn.addEventListener('click', ()=>{
      const cur = root.getAttribute('data-theme') === 'light' ? 'light' : 'dark';
      const next = cur === 'light' ? 'dark' : 'light';
      applyTheme(next);
      try { localStorage.setItem('theme', next); } catch(e){}
    });
  }

  // å½“ç³»ç»Ÿä¸»é¢˜å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¦‚æœç”¨æˆ·æœªä¿å­˜åå¥½åˆ™è·Ÿéšç³»ç»Ÿ
  if(window.matchMedia){
    const mq = window.matchMedia('(prefers-color-scheme: light)');
    mq.addEventListener && mq.addEventListener('change', (e)=>{
      try {
        const savedNow = localStorage.getItem('theme');
        if(!savedNow){
          applyTheme(e.matches ? 'light' : 'dark');
        }
      } catch(e){}
    });
  }
})();

/* ========= Canvas èƒŒæ™¯ï¼ˆè½»é‡ blob åŠ¨ç”»ï¼‰ ========= */
(function(){
  const canvas = document.getElementById('bg-canvas');
  if(!canvas) return;
  const ctx = canvas.getContext('2d');
  let w = canvas.width = innerWidth;
  let h = canvas.height = innerHeight;

  const blobs = [
    {x:w*0.12,y:h*0.15,r:220,dx:0.25,dy:0.12,color1:'rgba(58,202,255,0.12)',color2:'rgba(0,245,160,0.06)'},
    {x:w*0.85,y:h*0.85,r:260,dx:-0.18,dy:-0.06,color1:'rgba(255,60,172,0.12)',color2:'rgba(58,202,255,0.04)'},
    {x:w*0.5,y:h*0.45,r:180,dx:0.06,dy:-0.11,color1:'rgba(255,60,172,0.06)',color2:'rgba(0,245,160,0.04)'}
  ];

  function resize(){
    w = canvas.width = innerWidth;
    h = canvas.height = innerHeight;
  }
  addEventListener('resize', resize);

  function draw(){
    ctx.clearRect(0,0,w,h);
    blobs.forEach((b,i)=>{
      b.x += b.dx;
      b.y += b.dy;
      if(b.x < -200 || b.x > w+200) b.dx *= -1;
      if(b.y < -200 || b.y > h+200) b.dy *= -1;

      const g = ctx.createLinearGradient(b.x-b.r, b.y-b.r, b.x+b.r, b.y+b.r);
      g.addColorStop(0, b.color1);
      g.addColorStop(1, b.color2);

      ctx.beginPath();
      ctx.fillStyle = g;
      ctx.filter = 'blur(40px)';
      ctx.ellipse(b.x, b.y, b.r, b.r*0.7, Math.sin(Date.now()/2000 + i)*0.8, 0, Math.PI*2);
      ctx.fill();
      ctx.filter = 'none';
    });
    requestAnimationFrame(draw);
  }
  draw();
})();

/* ========= ä½œå“è¿‡æ»¤ ========= */
function filterGrid(e){
  const cur = e.currentTarget || e;
  document.querySelectorAll('.filter').forEach(b=>b.classList.remove('active'));
  cur.classList.add('active');

  const f = cur.dataset.filter;
  const cards = document.querySelectorAll('#gallery .card');
  if(f === 'all'){ cards.forEach(c=>c.style.display=''); }
  else { cards.forEach(c=> c.style.display = (c.dataset.type === f) ? '' : 'none'); }
}

/* ========= Modal / Gallery helpers ========= */
(function(){
  const modal = document.getElementById('modal');
  const modalContent = document.getElementById('modal-content');
  let lastActive = null;
  let trapEl = null;

  function escapeHtml(s){ return String(s||'').replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;'); }

  function extractBgUrl(styleStr){
    if(!styleStr) return '';
    return styleStr.replace(/^url\(["']?/, '').replace(/["']?\)$/, '');
  }

  window.datasetToObject = function(el){
    if(!el) return {title:'ä½œå“', desc:'', cover:'', tags:[]};
    const title = el.querySelector('.title')?.textContent?.trim() || el.querySelector('h4')?.textContent?.trim() || 'ä½œå“';
    const desc = el.querySelector('.desc')?.textContent?.trim() || '';
    const cover = el.dataset.coverUrl || el.getAttribute('data-cover-url') || extractBgUrl(getComputedStyle(el.querySelector('.cover')||{}).backgroundImage);
    const tags = Array.from(el.querySelectorAll('.tag')).map(t=>t.textContent.trim());
    return {title, desc, cover, tags};
  };

  window.openModal = function(data){
    if(!modal || !modalContent) return;
    lastActive = document.activeElement;
    modalContent.innerHTML = '';

    const img = document.createElement('img');
    img.src = data.cover || '';
    img.alt = escapeHtml(data.title) + ' å°é¢';
    img.style.maxWidth = '520px';
    img.style.borderRadius = '12px';
    img.style.boxShadow = '0 10px 30px rgba(0,0,0,0.4)';

    const meta = document.createElement('div');
    meta.style.flex = '1';
    meta.innerHTML = `
      <h3 style="margin-top:0">${escapeHtml(data.title)}</h3>
      <p style="color:var(--muted)">${escapeHtml(data.desc)}</p>
      <div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap">
        ${data.tags.map(t=>`<span class="tag">${escapeHtml(t)}</span>`).join('')}
      </div>
      <div style="margin-top:18px;display:flex;gap:10px">
        <button class="btn" onclick="launchDemo()">åœ¨çº¿è¯•ç© / æŸ¥çœ‹</button>
        <button class="chip" onclick="downloadAsset()">ä¸‹è½½å°é¢</button>
      </div>
    `;

    const row = document.createElement('div');
    row.className = 'row';
    row.style.alignItems = 'flex-start';
    row.appendChild(img);
    row.appendChild(meta);

    modalContent.appendChild(row);

    modal.classList.add('open');
    modal.setAttribute('aria-hidden','false');

    // focus ç®¡ç† & trap
    const focusable = modal.querySelectorAll('button, [href], input, textarea, [tabindex]:not([tabindex="-1"])');
    (focusable[0] && focusable[0].focus()) || modal.focus();

    trapEl = modal;
    document.addEventListener('focus', enforceFocus, true);
  };

  window.closeModal = function(){
    if(!modal) return;
    modal.classList.remove('open');
    modal.setAttribute('aria-hidden','true');
    document.removeEventListener('focus', enforceFocus, true);
    trapEl = null;
    if(lastActive && typeof lastActive.focus === 'function') lastActive.focus();
    lastActive = null;
  };

  function enforceFocus(e){
    if(!trapEl) return;
    if(!trapEl.contains(e.target)){
      e.stopPropagation();
      trapEl.querySelector('button, [href], input, textarea, [tabindex]:not([tabindex="-1"])')?.focus();
    }
  }

  // close handlers
  modal && modal.addEventListener('click', (e)=>{ if(e.target === modal) closeModal(); });
  document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeModal(); });

  // accessibility: make .card-link keyboard openable
  document.addEventListener('DOMContentLoaded', ()=>{
    document.querySelectorAll('.card-link').forEach(link=>{
      link.setAttribute('tabindex','0');
      link.addEventListener('keydown', (e)=>{ if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); openModal(datasetToObject(link.closest('.card'))); }});
    });

    // filter keyboard
    document.querySelectorAll('.filter').forEach(btn=>{
      btn.setAttribute('tabindex','0');
      btn.addEventListener('keydown', (e)=>{ if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); btn.click(); }});
    });
  });

  // demo placeholders
  window.launchDemo = function(){ alert('è¿™æ˜¯ç¤ºä¾‹æŒ‰é’® â€” åœ¨çœŸå®é¡¹ç›®ä¸­è¯·å°†å…¶é“¾æ¥åˆ°é¡¹ç›®é¡µé¢æˆ–è¯•ç©åœ°å€ã€‚'); };
  window.downloadAsset = function(){ alert('ä¸‹è½½ç¤ºä¾‹å°é¢ï¼ˆæ¼”ç¤ºï¼‰'); };
})();

/* ========= å°å·¥å…·ï¼šscrollToSection, cardKey, escapeHtml ========= */
function scrollToSection(id){
  const el = document.getElementById(id);
  if(!el) return;
  el.scrollIntoView({behavior:'smooth', block:'start'});
  el.setAttribute('tabindex','-1');
  el.focus({preventScroll:true});
}

function cardKey(ev){
  if(ev.key === 'Enter' || ev.key === ' '){
    ev.preventDefault();
    const card = ev.currentTarget.closest('.card');
    if(card) openModal(datasetToObject(card));
  }
}

/* ========= å›¾ç‰‡é¢„åŠ è½½ï¼ˆprogressiveï¼‰ ========= */
document.addEventListener('DOMContentLoaded', ()=>{
  document.querySelectorAll('.card').forEach(c=>{
    const src = c.dataset.coverUrl || c.getAttribute('data-cover-url') || '';
    if(!src) return;
    const img = new Image();
    img.src = src;
    img.onload = ()=> {
      const coverEl = c.querySelector('.cover');
      if(coverEl) coverEl.style.backgroundImage = `url('${src}')`;
    };
  });
});

/* ========= å° UIï¼šç§»é™¤é¼ æ ‡ç‚¹æŒ‰æ—¶çš„ focus outlineï¼ˆä¿ç•™é”®ç›˜å¯è§æ€§ï¼‰ ========= */
(function(){
  let usingKeyboard = false;
  window.addEventListener('keydown', ()=> usingKeyboard = true);
  window.addEventListener('mousedown', ()=> usingKeyboard = false);
  document.addEventListener('focusin', (e)=>{
    if(!usingKeyboard) e.target.style.outline = 'none';
  });
})();

/* ========= æœ€åï¼šè‡ªåŠ¨å°†æ‰€æœ‰ .filter çš„ click äº‹ä»¶ç»‘å®šåˆ° filterGridï¼ˆé˜²æ­¢ inline è¢«åˆ é™¤æ—¶ï¼‰ ========= */
document.addEventListener('DOMContentLoaded', ()=>{
  document.querySelectorAll('.filter').forEach(btn=>{
    btn.removeEventListener('click', filterGrid); // æ— å‰¯ä½œç”¨
    btn.addEventListener('click', filterGrid);
  });
});
</script>

</body>
</html>
